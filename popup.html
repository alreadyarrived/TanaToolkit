<!DOCTYPE html>
<html>
<head>
  <title>Tana Helper</title>
  <style>
    body {
      width: 300px;
      padding: 10px;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
    }
    h2, h3, h4 {
      color: #333;
      text-align: center;
    }
    button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #45a049;
    }
    #tanaTools, #webCapture {
      display: none;
    }
    #statusMessage {
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
    }
    #settings {
      display: none;
      margin-top: 20px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      width: 100%;
      padding: 5px;
      margin-top: 5px;
    }
    .tooltip {
      position: relative;
      display: inline-block;
      border-bottom: 1px dotted black;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 200px;
      background-color: #555;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px;
      position: absolute;
      z-index: 1;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      
      /* New styles for better visibility */
      top: -5px;
      margin-top: -40px; /* Adjust this value as needed */
      max-height: 80px;
      overflow-y: auto;
      word-wrap: break-word;
    }
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>
  <h2>Tana Helper</h2>
  <div id="webCapture">
    <button id="captureButton">Capture Page</button>
    <label for="highlightToggle" class="toggle-switch">
      <input type="checkbox" id="highlightToggle">
      <span class="slider round"></span>
      Highlight Mode
    </label>
  </div>
  <div id="tanaTools">
    <h3>Tana Tools</h3>
    <button id="fsrsButton">Start FSRS Review</button>
    <!-- Add more Tana-specific tool buttons here -->
  </div>
  <p id="statusMessage"></p>
  <button id="toggleSettings">Settings</button>
  <div id="settings">
    <h3>Settings</h3>
    <label for="tanaApiKey" class="tooltip">
      Tana API Key:
      <span class="tooltiptext">Find your API key in Tana's settings under the "API" section.</span>
    </label>
    <input type="password" id="tanaApiKey">
    <label for="inboxNodeId" class="tooltip">
      Inbox Node ID:
      <span class="tooltiptext">Right-click on your Inbox node in Tana and select "Copy node ID".</span>
    </label>
    <input type="text" id="inboxNodeId">
    <h4>FSRS Settings</h4>
    <label for="decayFactor" class="tooltip">
      Decay Factor:
      <span class="tooltiptext">Controls how quickly item difficulty and stability decay. Default: 0.9</span>
    </label>
    <input type="number" id="decayFactor" min="0.1" max="1" step="0.1" value="0.9">
    <label for="difficultyAddition" class="tooltip">
      Difficulty Addition:
      <span class="tooltiptext">Controls how much difficulty increases for incorrect responses. Default: 0.2</span>
    </label>
    <input type="number" id="difficultyAddition" min="0.1" max="1" step="0.1" value="0.2">
    <label for="stabilityAddition" class="tooltip">
      Stability Addition:
      <span class="tooltiptext">Controls how much stability increases for correct responses. Default: 0.2</span>
    </label>
    <input type="number" id="stabilityAddition" min="0.1" max="1" step="0.1" value="0.2">
    <label for="reviewsPerSession" class="tooltip">
      Reviews Per Session:
      <span class="tooltiptext">Maximum number of items to review in one session. Default: 20</span>
    </label>
    <input type="number" id="reviewsPerSession" min="1" max="100" value="20">
    <button id="saveSettings">Save Settings</button>
  </div>
  <script type="module" src="popup.js"></script>
</body>
</html>